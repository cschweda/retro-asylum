# Netlify Configuration for Retro Asylum (Nuxt 4)
# See DEPLOYMENT.md for detailed documentation

[build]
  # Build command: Just run the Nuxt build (Netlify installs deps automatically)
  command = "yarn build"

  # Publish directory: Static files generated by Nuxt
  publish = ".output/public"

[build.environment]
  # Node.js version (must match .nvmrc)
  NODE_VERSION = "22"

  # IMPORTANT: Must be set to NOT skip devDependencies during install
  NPM_FLAGS = "--include=dev"
  YARN_FLAGS = "--production=false"

# SPA routing: Redirect all routes to index.html for client-side routing
[[redirects]]
  from = "/*"
  to = "/index.html"
  status = 200

